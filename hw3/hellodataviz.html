<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>ZingSoft Demo</title>

    <script src="https://cdn.zingchart.com/zingchart.min.js"></script>
    <style>
        html,
        body,
        #lineChart {
            height: 100%;
            width: 100%;
        }

        #pieChart {
            height: 100%;
            width: 100%;
        }

        #barChart {
            height: 100%;
            width: 100%;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script src="hellodataviz.js"></script>
</head>

<body>
    <div id='lineChart'></div>
    <script>
        var lineConfig = {
            "type": "line",
            "legend": {

            },
            "series": [{
                "values": [20, 40, 25, 50, 15, 45, 33, 34],
                "text": "Test 1-001A3",
                "legend-text": "Test 1"
            }, {
                "values": [5, 30, 21, 18, 59, 50, 28, 33],
                "text": "Test 2-002B4",
                "legend-text": "Test 2"
            }, {
                "values": [30, 5, 18, 21, 33, 41, 29, 15],
                "text": "Test 3-004C3",
                "legend-text": "Test 3"
            }]
        };

        zingchart.render({
            id: 'lineChart',
            data: lineConfig,
            height: "100%",
            width: "100%"
        });
    </script>

    <div id='pieChart'></div>
    <script>
        const staticUrl = '/api/static/';
        fetch(staticUrl, {
            method: 'GET',
            headers: {
                "Content-Type": "application/json"
            },
        }).then(res => res.json())
        .then(data => fetchStaticDataGraph(data));

        function fetchStaticDataGraph(jsonData) {
            let screenDimDict = {};
            // Count up the instances of a specific screen dimension
            jsonData.forEach(obj => {
                if (screenDimDict[obj['screenDimensions']] == undefined) {
                    screenDimDict[obj['screenDimensions']] = 1;
                } else {
                    screenDimDict[obj['screenDimensions']] += 1;
                }
            });

            let series = [];
            for (let screenDim in screenDimDict) {
                let pieSlice = {
                    "values": [screenDimDict[screenDim]],
                    "text": screenDim,
                    "legend-text": screenDim
                };
                series.push(pieSlice);
            }

            let pieConfig = {
                "type": "pie",
                "title": {
                    "text"
                    : "Different Screen Dimensions Used on jak-cse135.site"
                },
                "plot": {
                    'value-box': {
                        'placement': "out",
                        'font-color': "black",
                        'font-size': 16,
                        'font-weight': "normal"
                    }
                },
                "legend": {

                },
                "series": series
            };

            zingchart.render({
                id: 'pieChart',
                data: pieConfig,
                height: 400,
                width: "100%"
            });
        }
        </script>

        <div id='barChart'></div>
        <script>
            var barConfig = {
                type: "bar",
                "legend": {

                },
                series: [{
                        values: [20, 40, 25, 50, 15, 45, 33, 34],
                        "text": "Test 1-001A3",
                        "legend-text": "Test 1"
                    },
                    {
                        values: [5, 30, 21, 18, 59, 50, 28, 33],
                        "text": "Test 2-002B4",
                        "legend-text": "Test 2"
                    },
                    {
                        values: [30, 5, 18, 21, 33, 41, 29, 15],
                        "text": "Test 3-004C3",
                        "legend-text": "Test 3"
                    }
                ]
            };

            zingchart.render({
                id: 'barChart',
                data: barConfig,
                height: "100%",
                width: "100%"
            });
    </script>
</body>

</html>